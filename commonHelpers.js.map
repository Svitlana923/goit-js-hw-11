{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js"],"sourcesContent":["\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst userValue = document.querySelector('input').value;\n\nfunction searchImages(userValue) {\n    const BASE_URL = 'https://pixabay.com/api/'\n    const key = '?key=42424645-ecd3f1048329df1dec069e6a8&'\n    const q = `q=${userValue}&`\n    const PARAMS = 'image_type=photo&orientation=horizontal&safesearch=true&per_page=18'\n    const url = BASE_URL + key + q + PARAMS;\n\n    return fetch(url)\n        .then(res => {\n            if (res.ok) {\n                return res.json();\n            } else {\n                throw new Error();\n            }\n        })\n        .then(data => {\n        if (data.hits.length === 0) {\n            throw new Error('No results found');\n        }\n        return data;\n    })\n        .catch(error => {\n            iziToast.error({\n                title: '',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight'\n            });\n        });\n}\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    });\n\n\nconst form = document.querySelector(\".form\")\nconst searchInput = document.querySelector(\"input\");\nconst searchBtn = document.querySelector(\"button\");\nconst myGallery = document.querySelector(\".gallery\");\n const loaderElem = document.querySelector('.loader');\n\nform.addEventListener('submit', (e) => {\n    e.preventDefault();\n    showLoader()\n    myGallery.innerHTML = '';\n   \n    searchImages(userValue)\n        .then(data => {\n        renderImages(data.hits);\n        })\n        .catch(error => {\n        renderError(error);\n        })\n        .finally(() => {hideLoader()\n        });\n\n})\n\n   function renderImages(array) {\n    const markup = array\n        .map(\n        ({\n            largeImageURL,\n            webformatURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n        }) => {\n            return `\n        <div class=\"card-container\">\n            <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"360\" height=\"300\" />\n            <ul class=\"info-cards-container\">\n                <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n                <li class=\"info-cards-elements\">views<span>${views}</span></li>\n                <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n                <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n            </ul>\n            </a>\n        </div>\n        `;\n        }\n        )\n        .join('');\n\n    myGallery.innerHTML = markup;\n    lightbox.refresh();\n}\n    function renderError(error) {\n    myGallery.innerHTML = '';\n    iziToast.show({\n        message: `‚ùå \"${error.message}\". Please try again!`,\n        color: 'red',\n        position: 'topRight',\n        maxWidth: '400px',\n    });\n    }\n   function showLoader() {\n    loaderElem.style.display = 'block';\n    }\n\n    function hideLoader() {\n    loaderElem.style.display = 'none';\n    }\n"],"names":["userValue","searchImages","BASE_URL","key","q","PARAMS","url","res","data","error","iziToast","lightbox","SimpleLightbox","form","myGallery","loaderElem","e","showLoader","renderImages","renderError","hideLoader","array","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads"],"mappings":"6vBAMA,MAAMA,EAAY,SAAS,cAAc,OAAO,EAAE,MAElD,SAASC,EAAaD,EAAW,CAC7B,MAAME,EAAW,2BACXC,EAAM,2CACNC,EAAI,KAAKJ,CAAS,IAClBK,EAAS,sEACTC,EAAMJ,EAAWC,EAAMC,EAAIC,EAEjC,OAAO,MAAMC,CAAG,EACX,KAAKC,GAAO,CACT,GAAIA,EAAI,GACJ,OAAOA,EAAI,OAEX,MAAM,IAAI,KAE1B,CAAS,EACA,KAAKC,GAAQ,CACd,GAAIA,EAAK,KAAK,SAAW,EACrB,MAAM,IAAI,MAAM,kBAAkB,EAEtC,OAAOA,CACf,CAAK,EACI,MAAMC,GAAS,CACZC,EAAS,MAAM,CACX,MAAO,GACP,QAAS,2EACT,SAAU,UAC1B,CAAa,CACb,CAAS,CACT,CAEE,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,GAClB,CAAK,EAGCC,EAAO,SAAS,cAAc,OAAO,EACvB,SAAS,cAAc,OAAO,EAChC,SAAS,cAAc,QAAQ,EACjD,MAAMC,EAAY,SAAS,cAAc,UAAU,EAC5CC,EAAa,SAAS,cAAc,SAAS,EAEpDF,EAAK,iBAAiB,SAAWG,GAAM,CACnCA,EAAE,eAAc,EAChBC,EAAY,EACZH,EAAU,UAAY,GAEtBb,EAAaD,CAAS,EACjB,KAAKQ,GAAQ,CACdU,EAAaV,EAAK,IAAI,CAC9B,CAAS,EACA,MAAMC,GAAS,CAChBU,EAAYV,CAAK,CACzB,CAAS,EACA,QAAQ,IAAM,CAACW,EAAY,CACpC,CAAS,CAET,CAAC,EAEE,SAASF,EAAaG,EAAO,CAC5B,MAAMC,EAASD,EACV,IACD,CAAC,CACG,cAAAE,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACZ,IACmB;AAAA;AAAA,uBAEIN,CAAa;AAAA,wBACZC,CAAY,UAAUC,CAAI,YAAYA,CAAI;AAAA;AAAA,6DAELC,CAAK;AAAA,6DACLC,CAAK;AAAA,gEACFC,CAAQ;AAAA,iEACPC,CAAS;AAAA;AAAA;AAAA;AAAA,SAMjE,EACA,KAAK,EAAE,EAEZf,EAAU,UAAYQ,EACtBX,EAAS,QAAO,CACpB,CACI,SAASQ,EAAYV,EAAO,CAC5BK,EAAU,UAAY,GACtBJ,EAAS,KAAK,CACV,QAAS,MAAMD,EAAM,OAAO,uBAC5B,MAAO,MACP,SAAU,WACV,SAAU,OAClB,CAAK,CACA,CACF,SAASQ,GAAa,CACrBF,EAAW,MAAM,QAAU,OAC1B,CAED,SAASK,GAAa,CACtBL,EAAW,MAAM,QAAU,MAC/B"}